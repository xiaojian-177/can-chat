# CAN-Chat

ä¸€ä¸ªåŠŸèƒ½å®Œæ•´ã€æ€§èƒ½ç¨³å®šçš„ç½‘ç»œèŠå¤©å®¤åº”ç”¨ï¼Œæ”¯æŒå®æ—¶æ¶ˆæ¯ä¼ é€’ã€é¢‘é“ç®¡ç†å’Œå›¾ç‰‡åˆ†äº«åŠŸèƒ½ã€‚

## ğŸŒŸ åŠŸèƒ½ç‰¹æ€§

### ç”¨æˆ·è®¤è¯ç³»ç»Ÿ
- âœ… æ³¨å†Œ/ç™»å½•åŠŸèƒ½
- âœ… å¯†ç åŠ å¯†å­˜å‚¨
- âœ… ä¼šè¯ç®¡ç†
- âœ… è‡ªåŠ¨ç™»å½•
- âœ… é‚®ç®±éªŒè¯ï¼ˆæ³¨å†Œæ—¶éœ€è¦éªŒè¯é‚®ç®±ï¼‰

### é¢‘é“ç®¡ç†ç³»ç»Ÿ
- âœ… åˆ›å»ºé¢‘é“ï¼ˆæ”¯æŒå…¬å¼€/ç§æœ‰é¢‘é“ï¼‰
- âœ… é¢‘é“åˆ—è¡¨æµè§ˆ
- âœ… æœç´¢é¢‘é“åŠŸèƒ½
- âœ… åŠ å…¥/é€€å‡ºé¢‘é“
- âœ… å·²åŠ å…¥é¢‘é“ä¸å…¬å¼€é¢‘é“åˆ†ç±»æ˜¾ç¤º

### å®æ—¶èŠå¤©åŠŸèƒ½
- âœ… æ–‡æœ¬æ¶ˆæ¯å‘é€
- âœ… å›¾ç‰‡æ¶ˆæ¯å‘é€
- âœ… æ¶ˆæ¯å†å²è®°å½•
- âœ… æ¶ˆæ¯çŠ¶æ€æ˜¾ç¤ºï¼ˆå‘é€è€…ã€æ—¶é—´ï¼‰
- âœ… å¤´åƒæ˜¾ç¤º
- âœ… ç³»ç»Ÿé€šçŸ¥ï¼ˆç”¨æˆ·åŠ å…¥/é€€å‡ºã€é¢‘é“åˆ›å»ºï¼‰

### ä¸ªäººä¿¡æ¯ç®¡ç†
- âœ… æ›´æ–°æ˜µç§°
- âœ… ä¸Šä¼ å¤´åƒ
- âœ… ç¼–è¾‘ä¸ªäººç®€ä»‹

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

### åç«¯
- **æ¡†æ¶**: Flask 3.0.0
- **ORM**: SQLAlchemy
- **WebSocket**: Flask-SocketIO
- **æ•°æ®åº“**: SQLite
- **API**: RESTful API
- **å¯†ç åŠ å¯†**: Werkzeug
- **é‚®ç®±éªŒè¯**: SendCloud API

### å‰ç«¯
- **HTML5**
- **CSS3** (ä½¿ç”¨CSSå˜é‡å®ç°ä¸»é¢˜å®šåˆ¶)
- **JavaScript** (åŸç”ŸJSï¼Œæ— æ¡†æ¶ä¾èµ–)
- **WebSocket**: Socket.IO Client

## ğŸ“¦ å®‰è£…ä¸è®¾ç½®

### 1. å…‹éš†é¡¹ç›®

```bash
git clone https://github.com/yourusername/can-chat.git
cd can-chat
```

### 2. å®‰è£…ä¾èµ–

```bash
# å®‰è£…Pythonä¾èµ–
pip install -r requirements.txt

# å¦‚æœæ²¡æœ‰requirements.txtæ–‡ä»¶ï¼Œå¯ä»¥æ‰‹åŠ¨å®‰è£…
pip install flask flask-sqlalchemy flask-cors flask-socketio flask-migrate python-dotenv
```

### 3. é…ç½®æ–‡ä»¶

åˆ›å»º `backend/api-config.json` æ–‡ä»¶ï¼Œæ·»åŠ ä»¥ä¸‹é…ç½®ï¼š

```json
{
    "apiUser": "youruser",
    "apiKey": "yourkey"
}
```

### 4. åˆå§‹åŒ–æ•°æ®åº“

```bash
# è¿›å…¥backendç›®å½•
cd backend

# åˆ›å»ºæ•°æ®åº“è¡¨
python -c "from app import app; from models import db; with app.app_context(): db.create_all()"
```

### 5. å¯åŠ¨åº”ç”¨

```bash
# åœ¨backendç›®å½•ä¸‹å¯åŠ¨åº”ç”¨
python app.py
```

åº”ç”¨å°†åœ¨ `http://localhost:5000` å¯åŠ¨ã€‚

## ğŸš€ ä½¿ç”¨æ–¹æ³•

### 1. æ³¨å†Œä¸ç™»å½•

1. è®¿é—® `http://localhost:5000/register` æ³¨å†Œæ–°è´¦å·
2. è¾“å…¥ç”¨æˆ·åã€å¯†ç å’Œé‚®ç®±
3. æŸ¥çœ‹é‚®ç®±ï¼Œè·å–éªŒè¯ç å¹¶å®ŒæˆéªŒè¯
4. ä½¿ç”¨æ³¨å†Œçš„è´¦å·ç™»å½•ç³»ç»Ÿ

### 2. åˆ›å»ºå’ŒåŠ å…¥é¢‘é“

1. ç™»å½•åï¼Œè¿›å…¥èŠå¤©é¡µé¢
2. ç‚¹å‡»"åˆ›å»ºé¢‘é“"æŒ‰é’®åˆ›å»ºæ–°é¢‘é“
3. åœ¨"å…¬å¼€é¢‘é“"æ ‡ç­¾é¡µæµè§ˆå¹¶åŠ å…¥å…¶ä»–é¢‘é“
4. ä½¿ç”¨æœç´¢åŠŸèƒ½æŸ¥æ‰¾ç‰¹å®šé¢‘é“

### 3. å‘é€æ¶ˆæ¯

1. é€‰æ‹©ä¸€ä¸ªé¢‘é“
2. åœ¨è¾“å…¥æ¡†ä¸­è¾“å…¥æ¶ˆæ¯å†…å®¹
3. ç‚¹å‡»å‘é€æŒ‰é’®å‘é€æ–‡æœ¬æ¶ˆæ¯
4. ç‚¹å‡»ç›¸æœºå›¾æ ‡å‘é€å›¾ç‰‡æ¶ˆæ¯

### 4. ç®¡ç†ä¸ªäººä¿¡æ¯

1. ç‚¹å‡»"èµ„æ–™"é“¾æ¥è¿›å…¥ä¸ªäººèµ„æ–™é¡µé¢
2. æ›´æ–°æ˜µç§°ã€å¤´åƒå’Œä¸ªäººç®€ä»‹
3. ä¿å­˜æ›´æ”¹

## ğŸ“š APIæ–‡æ¡£

### ç”¨æˆ·ç›¸å…³API

| ç«¯ç‚¹ | æ–¹æ³• | åŠŸèƒ½ |
|------|------|------|
| `/api/register` | POST | ç”¨æˆ·æ³¨å†Œ |
| `/api/login` | POST | ç”¨æˆ·ç™»å½• |
| `/api/logout` | POST | ç”¨æˆ·ç™»å‡º |
| `/api/check_login` | GET | æ£€æŸ¥ç™»å½•çŠ¶æ€ |
| `/api/user` | GET | è·å–å½“å‰ç”¨æˆ·ä¿¡æ¯ |
| `/api/user` | PUT | æ›´æ–°ç”¨æˆ·ä¿¡æ¯ |
| `/api/send_verification_code` | POST | å‘é€é‚®ç®±éªŒè¯ç  |
| `/api/verify_email` | POST | éªŒè¯é‚®ç®± |
| `/api/upload/avatar` | POST | ä¸Šä¼ å¤´åƒ |

### é¢‘é“ç›¸å…³API

| ç«¯ç‚¹ | æ–¹æ³• | åŠŸèƒ½ |
|------|------|------|
| `/api/channels` | POST | åˆ›å»ºé¢‘é“ |
| `/api/channels/public` | GET | è·å–å…¬å¼€é¢‘é“åˆ—è¡¨ |
| `/api/channels/joined` | GET | è·å–å·²åŠ å…¥é¢‘é“åˆ—è¡¨ |
| `/api/channels/search` | GET | æœç´¢é¢‘é“ |
| `/api/channels/<channel_id>` | GET | è·å–é¢‘é“è¯¦æƒ… |
| `/api/channels/<channel_id>/join` | POST | åŠ å…¥é¢‘é“ |
| `/api/channels/<channel_id>/leave` | POST | é€€å‡ºé¢‘é“ |
| `/api/channels/<channel_id>/messages` | GET | è·å–é¢‘é“æ¶ˆæ¯å†å² |
| `/api/send_image_message` | POST | å‘é€å›¾ç‰‡æ¶ˆæ¯ |

### WebSocketäº‹ä»¶

| äº‹ä»¶å | æ–¹å‘ | åŠŸèƒ½ |
|--------|------|------|
| `connect` | å®¢æˆ·ç«¯â†’æœåŠ¡å™¨ | å»ºç«‹è¿æ¥ |
| `disconnect` | å®¢æˆ·ç«¯â†’æœåŠ¡å™¨ | æ–­å¼€è¿æ¥ |
| `join_channel` | å®¢æˆ·ç«¯â†’æœåŠ¡å™¨ | åŠ å…¥é¢‘é“ |
| `leave_channel` | å®¢æˆ·ç«¯â†’æœåŠ¡å™¨ | ç¦»å¼€é¢‘é“ |
| `send_message` | å®¢æˆ·ç«¯â†’æœåŠ¡å™¨ | å‘é€æ¶ˆæ¯ |
| `new_message` | æœåŠ¡å™¨â†’å®¢æˆ·ç«¯ | æ¥æ”¶æ–°æ¶ˆæ¯ |
| `system_notification` | æœåŠ¡å™¨â†’å®¢æˆ·ç«¯ | æ¥æ”¶ç³»ç»Ÿé€šçŸ¥ |
| `channel_created` | æœåŠ¡å™¨â†’å®¢æˆ·ç«¯ | æ¥æ”¶é¢‘é“åˆ›å»ºé€šçŸ¥ |

## ğŸ“ é¡¹ç›®ç»“æ„

```
can-chat/
â”œâ”€â”€ backend/
â”‚   â”œâ”€â”€ app.py              # ä¸»åº”ç”¨æ–‡ä»¶
â”‚   â”œâ”€â”€ models.py           # æ•°æ®åº“æ¨¡å‹
â”‚   â”œâ”€â”€ apis.py             # APIç›¸å…³åŠŸèƒ½
â”‚   â”œâ”€â”€ migrations/         # æ•°æ®åº“è¿ç§»æ–‡ä»¶
â”‚   â””â”€â”€ __init__.py
â”œâ”€â”€ static/
â”‚   â”œâ”€â”€ css/
â”‚   â”‚   â””â”€â”€ style.css       # æ ·å¼æ–‡ä»¶
â”‚   â”œâ”€â”€ js/
â”‚   â”‚   â””â”€â”€ chat.js         # èŠå¤©åŠŸèƒ½JS
â”‚   â””â”€â”€ img/
â”‚       â””â”€â”€ avatars/        # å¤´åƒå­˜å‚¨ç›®å½•
â”œâ”€â”€ templates/
â”‚   â”œâ”€â”€ index.html          # é¦–é¡µ
â”‚   â”œâ”€â”€ login.html          # ç™»å½•é¡µ
â”‚   â”œâ”€â”€ register.html       # æ³¨å†Œé¡µ
â”‚   â”œâ”€â”€ chat.html           # èŠå¤©é¡µ
â”‚   â””â”€â”€ profile.html        # ä¸ªäººèµ„æ–™é¡µ
â”œâ”€â”€ chat.db                 # SQLiteæ•°æ®åº“æ–‡ä»¶
â”œâ”€â”€ requirements.txt        # ä¾èµ–åˆ—è¡¨
â”œâ”€â”€ README.md               # é¡¹ç›®æ–‡æ¡£
â””â”€â”€ .env                    # ç¯å¢ƒé…ç½®æ–‡ä»¶
```

## ğŸ¤ è´¡çŒ®

æ¬¢è¿æäº¤Issueå’ŒPull Requestï¼

### å¼€å‘æµç¨‹
1. Forké¡¹ç›®
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. å¼€å¯Pull Request

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨MITè®¸å¯è¯ - æŸ¥çœ‹ [LICENSE](LICENSE) æ–‡ä»¶äº†è§£è¯¦æƒ…ã€‚

## ğŸ“§ è”ç³»æ–¹å¼

å¦‚æœæ‚¨æœ‰ä»»ä½•é—®é¢˜æˆ–å»ºè®®ï¼Œæ¬¢è¿è”ç³»æˆ‘ä»¬ï¼š

- é‚®ç®±: 729166551@qq.com
- GitHub: [xiaojian-177](https://github.com/xiaojian-177)

---

**CAN-Chat** - ä¸€ä¸ªåŠŸèƒ½å®Œæ•´çš„å®æ—¶èŠå¤©å®¤åº”ç”¨
